# gpu-operator-values.yml

# Since cloud-init script already installs the NVIDIA drivers on the host,
# disabling the operator's driver container to prevent conflicts.
driver:
  enabled: false

# By default, the operator's components are deployed as daemonsets to all nodes
# that it identifies as having a GPU. To be explicit and ensure it only targets
# the node labeled via Ansible/Pulumi, using a nodeSelector.
operator:
  defaultRuntime: nvidia
  nodeSelector:
    node-role.kubernetes.io/gpu: "true"

# The following sections ensure that all components managed by the operator
# (like the container toolkit, device plugin, etc.) respect the same nodeSelector.
toolkit:
  nodeSelector:
    node-role.kubernetes.io/gpu: "true"
device-plugin:
  nodeSelector:
    node-role.kubernetes.io/gpu: "true"
dcgmExporter:
  nodeSelector:
    node-role.kubernetes.io/gpu: "true"
gfd:
  nodeSelector:
    node-role.kubernetes.io/gpu: "true"
